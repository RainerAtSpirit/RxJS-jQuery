/**
* Copyright 2011 Microsoft Corporation
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(o,f){var b=o.Rx,k=b.Observable,p=k.prototype,d=b.AsyncSubject,h=k.create,l=k.createWithDisposable,m=Array.prototype.slice,b=f.fn;f.Deferred.prototype.toObservable=function(){var a=new d;parent.done(function(){a.onNext(m.call(arguments));a.onCompleted()}).fail(function(){a.onError(m.call(arguments))});return a};p.toDeferred=function(){var a=f.Deferred();this.subscribe(function(c){a.resolve(c)},function(c){a.reject(c)});return a};f.Callbacks.prototype.toObservable=function(){var a=this;return h(function(c){var b=
function(a){c.onNext(a)};a.add(b);return function(){a.remove(b)}})};b.onAsObservable=function(a,c,b){var e=this;return h(function(g){var n=function(a){g.onNext(a)};e.on(a,c,b,n);return function(){e.off(a,c,n)}})};b.bindAsObservable=function(a,c){var b=this;return h(function(e){var g=function(a){e.onNext(a)};b.bind(a,c,g);return function(){b.unbind(a,g)}})};b.delegateAsObservable=function(a,c,b){var e=this;return h(function(g){var d=function(a){g.onNext(a)};e.delegate(a,c,b,d);return function(){e.undelegate(a,
c,d)}})};b.liveAsObservable=function(a,c){var b=this;return h(function(e){var d=function(a){e.onNext(a)};b.live(a,c,d);return function(){b.die(a,d)}})};b.changeAsObservable=function(a){return this.bindAsObservable("change",a)};b.clickAsObservable=function(a){return this.bindAsObservable("click",a)};b.dblclickAsObservable=function(a){return this.bindAsObservable("dblclick",a)};b.focusAsObservable=function(a){return this.bindAsObservable("focus",a)};b.focusinAsObservable=function(a){return this.bindAsObservable("focusin",
a)};b.focusoutAsObservable=function(a){return this.bindAsObservable("focusout",a)};b.keydownAsObservable=function(a){return this.bindAsObservable("keydown",a)};b.keyupAsObservable=function(a){return this.bindAsObservable("keyup",a)};b.loadAsObservable=function(a){return this.bindAsObservable("load",a)};b.mousedownAsObservable=function(a){return this.bindAsObservable("mousedown",a)};b.mouseenterAsObservable=function(a){return this.bindAsObservable("mouseenter",a)};b.mouseleaveAsObservable=function(a){return this.bindAsObservable("mouseleave",
a)};b.mousemoveAsObservable=function(a){return this.bindAsObservable("mousemove",a)};b.mouseoverAsObservable=function(a){return this.bindAsObservable("mouseover",a)};b.mouseupAsObservable=function(a){return this.bindAsObservable("mouseup",a)};b.resizeAsObservable=function(a){return this.bindAsObservable("resize",a)};b.scrollAsObservable=function(a){return this.bindAsObservable("scroll",a)};b.selectAsObservable=function(a){return this.bindAsObservable("select",a)};b.submitAsObservable=function(a){return this.bindAsObservable("submit",
a)};b.unloadAsObservable=function(a){return this.bindAsObservable("unload",a)};b.oneAsObservable=function(a,c){var b=this;return l(function(e){var d=function(c){b.unbind(a,d);e.onNext(c);e.onCompleted()};b.bind(a,c,d);return dispoableEmpty})};b.readyAsObservable=function(){var a=this;return l(function(c){a.ready(function(a){c.onNext(a)});return dispoableEmpty})};b.hideAsObservable=function(a){var c=new d;this.hide(a,function(){c.onNext(this);c.onCompleted()});return c};b.showAsObservable=function(a){var c=
new d;this.show(a,function(){c.onNext(this);c.onCompleted()});return c};b.animateAsObservable=function(a,c,b){var e=new d;this.animate(a,c,b,function(){e.onNext(this);e.onCompleted()});return e};b.fadeInAsObservable=function(a){var c=new d;this.fadeIn(a,function(){c.onNext(this);c.onCompleted()});return c};b.fadeToAsObservable=function(a,c){var b=new d;this.fadeTo(a,c,function(){b.onNext(this);b.onCompleted()});return b};b.fadeOutAsObservable=function(a){var c=new d;this.fadeOut(a,function(){c.onNext(this);
c.onCompleted()});return c};b.fadeToggleAsObservable=function(a,c){var b=new d;this.fadeToggle(a,c,function(){b.onNext(this);b.onCompleted()});return b};b.slideDownAsObservable=function(a){var c=new d;this.slideDown(a,function(){c.onNext(this);c.onCompleted()});return c};b.slideUpAsObservable=function(a){var c=new d;this.slideUp(a,function(){c.onNext(this);c.onCompleted()});return c};b.slideToggleAsObservable=function(a){var c=new d;this.slideToggle(a,function(){c.onNext(this);c.onCompleted()});return c};
b.toggleAsObservable=function(a,c){var b=new d;this.toggle(a,c,function(){b.onNext(this);b.onCompleted()});return b};var j=f.ajaxAsObservable=function(a){var b=new d,i={},e;for(e in a)i[e]=a[e];i.success=function(a,d,e){b.onNext({data:a,textStatus:d,jqXHR:e});b.onCompleted()};i.error=function(a,d,e){b.onError({jqXHR:a,textStatus:d,errorThrown:e})};f.ajax(i);return b};f.getAsObservable=function(a,b,d){return j({url:a,dataType:d,data:b})};f.getJSONAsObservable=function(a,b){return j({url:a,dataType:"json",
data:b})};f.getScriptAsObservable=function(a){return j({url:a,dataType:"script"})};f.postAsObservable=function(a,b,d){return j({url:a,dataType:d,data:b,type:"POST"})}})(this,jQuery);